<div class="card shadow-sm mb-4">
  <div class="card-body">
    <%= form_with url: search_products_path, method: :get, local: true do |f| %>
      <div class="row g-2 mb-3">
        <div class="col-md-7">
          <div class="input-group">
            <%= f.text_field :query, placeholder: 'Search products...', value: @query, class: 'form-control' %>
          </div>
        </div>
        
        <div class="col-md-3">
          <%= f.select :category_id, 
                      options_for_select([['All Categories', '']] + 
                                        @categories.map{ |c| [c.name, c.id] }, 
                                        params[:category_id]), {}, 
                      { class: 'form-select' } %>
        </div>
        
        <div class="col-md-2">
          <%= f.submit 'Search', class: 'btn btn-primary w-100' %>
        </div>
      </div>
      
      <div class="d-flex flex-wrap gap-2">
        <span class="align-self-center text-muted me-2">Filter:</span>
        <%= link_to 'All Products', products_path, class: "btn btn-sm #{params[:filter].blank? ? 'btn-dark' : 'btn-outline-dark'}" %>
        <%= link_to 'On Sale', products_path(filter: 'on_sale'), class: "btn btn-sm #{params[:filter] == 'on_sale' ? 'btn-dark' : 'btn-outline-dark'}" %>
        <%= link_to 'New Arrivals', products_path(filter: 'new'), class: "btn btn-sm #{params[:filter] == 'new' ? 'btn-dark' : 'btn-outline-dark'}" %>
        <%= link_to 'Recently Updated', products_path(filter: 'updated'), class: "btn btn-sm #{params[:filter] == 'updated' ? 'btn-dark' : 'btn-outline-dark'}" %>
      </div>
    <% end %>
  </div>
</div>